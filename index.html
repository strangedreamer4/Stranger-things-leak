<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stranger Things Leak</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-functions.js"></script>
    <script>
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyByh6rayLnkXDtRd4DYiWkO6q2bxUULzSc",
            authDomain: "ip-shut.firebaseapp.com",
            databaseURL: "https://ip-shut-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "ip-shut",
            storageBucket: "ip-shut.appspot.com",
            messagingSenderId: "852944919264",
            appId: "1:852944919264:web:e4e380caa32d982819ce85"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        // Initialize Firebase services
        const auth = firebase.auth();
        const functions = firebase.functions();

        // Function to log IP using Cloud Function
        function logIP(ip) {
            const logIPCallable = functions.httpsCallable('logIP');
            logIPCallable({ ip: ip })
                .then(result => {
                    console.log(result.data.message);
                })
                .catch(error => {
                    console.error("Error logging IP:", error);
                });
        }

        // Example function to log IP on page load (you may adjust as needed)
        function logIPOnLoad() {
            // Replace "dummy-ip" with actual method to get user's IP address
            const ip = "dummy-ip";
            logIP(ip);
        }

        // Firebase authentication listeners
        auth.onAuthStateChanged(user => {
            if (user) {
                // User is signed in.
                logIPOnLoad(); // Log IP when user is authenticated
            } else {
                // No user is signed in.
                console.log("User not authenticated.");
            }
        });

        // Example: Sign-in function using Firebase Authentication (adjust as needed)
        function signIn() {
            auth.signInAnonymously()
                .then(() => {
                    console.log("User signed in anonymously.");
                })
                .catch(error => {
                    console.error("Error signing in:", error);
                });
        }

        // Call signIn function when page loads (or use button click, etc.)
        window.onload = signIn;
    </script>
</head>
<body>
    <header>
        <h1>Stranger Things Season 5</h1>
        <h2>Exclusive Leak: Episode 2</h2>
    </header>
    <main>
        <section class="announcement">
            <h3>Breaking News!</h3>
            <p>The highly anticipated second episode of Season 5 has been leaked! Catch an early glimpse of the action, mystery, and thrills.</p>
            <button onclick="window.location.href='video.html'">Watch Now</button>
        </section>
    </main>
    <footer>
        <p>&copy; 2024 Stranger Things Fan Site. All Rights Reserved.</p>
        <a href="disclaimer.html">Legal Disclaimer</a>
    </footer>
</body>
</html>
